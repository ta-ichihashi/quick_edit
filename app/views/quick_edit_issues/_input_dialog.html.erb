<div id="quick_edit_input_dialog" title="Quick Edit - <%= @dialog_params[:caption] %>">
   <p><%= @dialog_params[:help_message] %></p>
   <%= form_tag({:controller=>'issues', :action=>:bulk_update}) do %>
      <% case @dialog_params[:field_type] %>
      <% when "date" %>
      <input id="new_value"
             name="<%= @dialog_params[:target_specifier] %>"
             type="text" 
             size="40"
             style="vertical-align:middle;"
             value="<%= @dialog_params[:default_value] %>"></input>
      <%= calendar_for('new_value') %>
      <% when :text %>
      <textarea id="new_value"
             name="<%= @dialog_params[:target_specifier] %>"
             cols="40"
             rows="10"
             style="vertical-align:middle;"><%= @dialog_params[:default_value] %></textarea>
      <%= wikitoolbar_for 'new_value' %>
      <% else %>
      <input id="new_value"
             name="<%= @dialog_params[:target_specifier] %>"
             type="text"
             size="40"
             style="vertical-align:middle;"
             value="<%= @dialog_params[:default_value] %>"></input>
      <% end %>
      <% @dialog_params[:issue_ids].each do |id| %>
      <input id="ids" name="ids[]" type="hidden" value="<%= id %>"></input>
      <% end %>
      <input id="back_url" name="back_url" type="hidden" value="<%= @dialog_params[:back_url] %>"></input>
      <input id="validation_pattern" type="hidden" value="<%= @dialog_params[:validation_pattern] %>"></input>
   <% end %>
</div>

<script>
//<![CDATA[
  var height = <%= (@dialog_params[:field_type] == :text) ? 360 : 210 %>;
  $("#quick_edit_input_dialog").dialog({
     modal: true,
     closeOnEscape: false,
     width: 600,
     height: height,
     buttons: {
        "Ok" : quick_edit_input_dialog_ok,
        "Cancel" : quick_edit_input_dialog_cancel
     },
     close: quick_edit_input_dialog_close
  });
//]]>
</script>
